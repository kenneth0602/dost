<div style="display: flex; flex-direction: column; height: 100%;">
    <div style="
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(90deg,rgb(13, 78, 134) 42%,rgb(0, 152, 164) 100%);
  padding: 12px 16px;
  border-bottom: 1px solid #ddd;
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
">
        <h2 style="margin: 0; font-size: 1.25rem; font-weight: 600; color: white;">
            Answer Form
        </h2>
        <button style="margin-top: 0; color: white;" mat-icon-button (click)="dialogRef.close()"
            aria-label="Close dialog">
            <mat-icon>close</mat-icon>
        </button>
    </div>
    <div style="flex: 1; overflow-y: auto; padding: 1.5rem;">
        <form *ngIf="answerForm && data?.formData?.contents" [formGroup]="answerForm" class="space-y-6">
            <div *ngFor="let content of data.formData.contents" class="space-y-4">
                <mat-card class="p-4 rounded-xl shadow" style="margin-bottom: 3%;">
                    <mat-card-content>

                        <!-- Textbox (display as plain text) -->
                        <div *ngIf="content.type === 'textbox'" class="text-base text-gray-800"
                            style="text-align: center; font-weight: 700; font-size: 1.3rem">
                            <label class="font-medium">{{ content.label }}</label>
                            <p class="mt-1 border rounded bg-gray-100 p-2">{{ content.options[0]?.value || '' }}</p>
                        </div>

                        <!-- Essay (input field) -->
                        <mat-form-field *ngIf="content.type === 'essay'" appearance="outline" class="w-full">
                            <mat-label>{{ content.label }}</mat-label>
                            <textarea matInput [formControlName]="content.contentID" rows="4"
                                placeholder="Write your response here...">
                            </textarea>
                            <mat-error *ngIf="answerForm.get(content.contentID)?.hasError('required')">
                                This field is required.
                            </mat-error>
                        </mat-form-field>

                        <!-- Radio Group -->
                        <div *ngIf="content.type === 'radio'" class="space-y-1">
                            <label class="block font-medium text-gray-800 mb-2">{{ content.label }}</label>
                            <mat-radio-group [formControlName]="content.contentID" class="flex flex-wrap gap-4">
                                <mat-radio-button *ngFor="let option of content.options" [value]="option.value"
                                    class="text-sm">
                                    {{ option.value }}
                                </mat-radio-button>
                            </mat-radio-group>
                            <mat-error *ngIf="answerForm.get(content.contentID)?.hasError('required')">
                                This field is required.
                            </mat-error>
                        </div>

                        <!-- âœ… Checkbox Group -->
                        <div *ngIf="content.type === 'checkbox'" class="space-y-1">
                            <label class="block font-medium text-gray-800 mb-2">{{ content.label }}</label>
                            <div [formArrayName]="content.contentID" class="flex flex-col gap-2">
                                <div *ngFor="let option of content.options; let i = index">
                                    <mat-checkbox [formControlName]="i">
                                        {{ option.value }}
                                    </mat-checkbox>
                                </div>
                            </div>
                            <mat-error *ngIf="answerForm.get(content.contentID)?.hasError('required')">
                                Please select at least one option.
                            </mat-error>
                        </div>

                    </mat-card-content>
                </mat-card>
            </div>

            <div style="
    padding: 1rem 1.5rem;
    background-color: white;
    border-top: 1px solid #ddd;
    display: flex;
    justify-content: flex-end;
  ">
                <button (click)="onSubmit()" mat-raised-button color="primary" class="px-6 py-2">
                    Submit
                </button>
            </div>
        </form>
    </div>
</div>